============================================================================
■■■T2EXソースコードパッケージ Ver 2.01.00 修正箇所             2015/06/17

■T2EX Ver 2.01.00 修正箇所

----
■ ソースコードの分離

 ○ T2EX本体のソースコードと、NetBSDもしくはOpenBSDに由来するソースコードを
    別のパッケージに分離

    - t2ex_source.tar.gz  T2EX本体(新規作成部分)のソースコード
        -> T-License 2.0 を適用

    - bsd_source.tar.gz   NetBSDまたはOpenBSD由来のソースコード
        -> T-License 2.0 適用対象外

----
■ ソースコードの修正

 ○ 全般的な修正点
    - 字句の間違いの訂正
    - 改行コードをLFに統一
    - ファイルヘッダの調整
    - ワーニング回避 (ポインタの符号キャスト、他)

 ○ 不具合の修正
    - BIG ENDIAN対応
    - so_select_ms(), so_select_us() に TMO_FEVR を指定した場合の不具合を修正
    - FATのパラメータによっては正常に読み出せないことがある不具合を修正
    - FAT32の認識方法に抜けがあったので追加
    - FAT12/16のルートディレクトリアクセス時に先頭エントリのアクセス日付を更新
      する不具合を修正

 ○ コードの改善
    - T-Kernel 2.02.00対応
      > usermain_t2ex/ を廃止し、sysmain/src/ に移動
      > usermain.c を usermain_t2ex.c に名称変更
      > sysmain/build/tef_em1dでのビルド時にライブラリもビルドするように変更
      > build 時に生成されるバイナリファイル名に _t2ex を追加
        (TK2のビルドによって生成されるバイナリファイル名と区別するため)
      > RAM-Kernelのブート時にlaunch.Sを経由するように変更
    - コードの効率化によるメモリ使用量の削減
    - T2EXとして必要のない処理を削除
    - appl_main の終了後、即座にシャットダウンされるように変更
    - サンプルシェルにプログラムロード関連コマンド(load, loadspg, unload)を追加

 ○ ビルドに関する改善
    - ビルド時のオプション指定が正常に機能するように修正
    - デバッグモードでビルドする際に ASFLAGS に -g を追加
    - T2EXの機能選択に応じてリンクするライブラリを決めるように変更
    - sysmainからのmake mode=debugが伝搬しないように修正
    - bchkspc系の関数をビルドに含めないように修正
    - syslog()の定義追加に伴うライブラリ依存順序の修正
    - make source関連の依存関係修正
    - TK2のkernel/sysdepend以下のファイルを上書きしないように変更
    - imalloc.cを上書きしないようにmkt2exsvcを修正
    - mkt2exsvc関連のファイルとフォルダを t2ex/etc から etc/ に移動

----
■ 資料の更新

 ○ T-Licenseをバージョン2.0からバージョン2.1に更新
      TEF000-218-150401.pdf

============================================================================
